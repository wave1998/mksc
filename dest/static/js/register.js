function verify(n,r,a){n.addEventListener("focus",function(){this.nextElementSibling.innerText="*"},!1),n.addEventListener("blur",function(){var e=n.value,t=n.nextElementSibling;return t.style.color="red",t.style.fontSize="12px",""==e?(t.innerText=r+"不能为空",!1):e.length<6||16<e.length?!(t.innerText="输入的长度不正确"):a.test(e)?(t.innerText="ok",void(t.style.color="#0f0")):(t.innerText=r+"格式不对",!1)},!1)}var username=document.querySelector('[name="username"]');verify(username,"用户名",/^[u4e00-\u9fa50-9a-zA-z]{6,16}$/);var email=document.querySelector('[name="email"]');verify(email,"邮箱",/^\w{4,12}@\w+\.(com|cn)$/);var password=document.querySelector('[name="pass"]');verify(password,"密码",/^[a-zA-Z][0-9a-zA-z]{5,15}$/);var repass=document.querySelector('[name = "repass"]');verify(repass,"密码",/^[a-zA-Z][0-9a-zA-z]{5,15}$/),repass.addEventListener("blur",function(){if(this.value!=password.value){var e=this.nextElementSibling;e.style.color="red",e.style.fontSize="12px",e.innerText="两次密码不一致"}},!1);var tel=document.querySelector('[name="tel"]');function check(e,t,n){var r=e.value,a=e.nextElementSibling;return a.style.color="red",a.style.fontSize="12px",""==r?(a.innerText=t+"不能为空",!1):r.length<6||16<r.length?!(a.innerText="输入的长度不正确"):n.test(r)?(a.innerText="ok",a.style.color="#0f0",!0):(a.innerText=t+"格式不对",!1)}verify(tel,"手机号",/^1[345789]\d{9}$/),document.querySelector('input[name="Submit"]').onclick=function(){var e={};if(e.username=check(username,"用户名",/^[u4e00-\u9fa50-9a-zA-z]{6,16}$/),e.password=check(password,"密码",/^[a-zA-Z][0-9a-zA-Z]{5,15}$/),e.repass=check(repass,"密码",/^[a-zA-Z][0-9a-zA-Z]{5,15}$/),repass.value!=password.value){var t=repass.nextElementSibling;return t.style.color="red",t.style.fontSize="12px",!(t.innerText="两次密码不一致")}if(e.tel=check(tel,"手机号",/^1[345789]\d{9}$/),e.email=check(email,"邮箱",/^\w{4,12}@\w+\.(com|cn)$/),0==document.querySelector('input[name="agreement"]').checked)return!(document.querySelector(".accept").style.display="block");for(var n in e)if(!e[n])return!1;PAjax({method:"post",async:!0,data:{uname:username.value,pass:password.value,email:email.value,tel:tel.value.trim()},url:"../static/php/register.php",success:function(e){resolve(e)}}).then(function(e){if(1===(e=JSON.parse(e)).status)return alert(e.msg),!1;if(2===e.status)alert(e.msg),location.href="login.html";else if(3===e.status)return alert(e.msg),!1})};